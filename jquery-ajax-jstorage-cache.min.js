(function($){var log=function(message){if(window.console){console.debug(message)}else{alert(message)}};$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(options.cacheJStorage==undefined||!options.cacheJStorage)return;var cacheKey;if(options.cacheKey)cacheKey=options.cacheKey;else cacheKey=options.url+options.type+options.data;if(options.isCacheValid&&!options.isCacheValid())$.jStorage.deleteKey(cackeKey);if($.jStorage.get(cacheKey)){var dataCached=$.extend(true,{},$.jStorage.get(cacheKey));if(options.success)options.success(dataCached);jqXHR.abort()}else{var successhandler=options.success;options.success=function(data){$.jStorage.set(cacheKey,data);var dataCached=$.extend(true,{},data);if(successhandler)successhandler(dataCached);options.success=successhandler}}})})(jQuery);